<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dozzle vs Hose-End: Interactive Comparison</title>
<style>
  :root {
    --green: #136A40;     /* Dozzle green */
    --yellow: #FFC700;    /* Dozzle yellow */
    --bg: #FFFBF0;        /* Dozzle cream */
    --text: #111827;
    --muted: #6b7280;
    --card: #ffffff;
    --border: #e5e7eb;
  }
  * { box-sizing: border-box; }
  body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: var(--bg); color: var(--text); }
  .wrap { max-width: 1000px; margin: 24px auto; padding: 16px; }
  .header { display:flex; align-items:center; gap:12px; margin-bottom: 8px; }
  .dot { width:10px; height:10px; border-radius:50%; background:var(--green); }
  h1 { font-size: 1.5rem; margin:0; }
  .sub { color: var(--muted); font-size: 0.95rem; margin: 4px 0 16px; }

  .controls { display:grid; grid-template-columns: 1fr; gap: 16px; margin: 12px 0 20px; }
  @media (min-width: 720px) { .controls { grid-template-columns: 1fr 1fr; } }
  .control { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 14px; }
  .control h3 { margin: 0 0 6px; font-size: 0.98rem; }
  .row { display:flex; align-items:center; gap: 12px; }
  .badge { display:inline-flex; align-items:center; gap:8px; padding: 4px 10px; border-radius: 999px; font-weight: 600; font-size: 0.85rem; }
  .badge.dozzle { background: rgba(19,106,64,0.08); color: var(--green); border:1px solid rgba(19,106,64,0.15);}
  .badge.hose { background: rgba(255,199,0,0.12); color: #7a5d00; border:1px solid rgba(255,199,0,0.25);}
  input[type=range] { width: 100%; }
  .value { font-variant-numeric: tabular-nums; min-width: 12ch; text-align: right; font-weight:600; }
  .hint { color: var(--muted); font-size: 0.8rem; }
  .btns { display:flex; gap: 10px; margin-top: 8px; }
  button { background: var(--green); color: #fff; border: none; padding: 10px 14px; border-radius: 10px; cursor: pointer; font-weight: 600; }
  button.secondary { background: #eef2ff; color: #1e40af; }

  .grid { display:grid; gap: 16px; grid-template-columns: 1fr; }
  @media (min-width: 900px) { .grid { grid-template-columns: 1.1fr 0.9fr; } }

  table { width: 100%; border-collapse: collapse; background: var(--card); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; }
  thead th { background: #f9fafb; color:#374151; text-transform: uppercase; letter-spacing: .02em; font-size: .78rem; font-weight: 700; padding: 10px 12px; border-bottom:1px solid var(--border); }
  tbody td { padding: 12px; border-bottom: 1px solid var(--border); vertical-align: middle; }
  tbody tr:last-child td { border-bottom: none; }
  .num { text-align: right; font-variant-numeric: tabular-nums; }
  .savings { color: var(--green); font-weight: 700; }
  .loss { color: #b91c1c; font-weight: 700; }

  .viz { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 14px; }
  .viz h3 { margin: 0 0 4px; font-size: 1rem; }
  .barpair { margin: 8px 0 14px; }
  .labelrow { display:flex; justify-content: space-between; font-size: .9rem; }
  .bars { display:flex; align-items: center; gap: 8px; }
  .bar { height: 16px; border-radius: 8px; background: #e5e7eb; position: relative; overflow: hidden; flex: 1; }
  .bar > span { display:block; height: 100%; }
  .bar .dozzle { background: var(--green); }
  .bar .hose { background: var(--yellow); }

  .summary { background: #f0fdf4; border: 1px solid #bbf7d0; color:#065f46; border-radius: 14px; padding: 14px; margin: 16px 0; white-space: pre-line; }
  details { background: #fff; border:1px dashed var(--border); border-radius: 12px; padding: 12px; }
  details summary { cursor:pointer; font-weight:600; }
  .footnote { color: var(--muted); font-size: .8rem; margin-top: 10px; }
  .smallcaps { font-variant: all-small-caps; letter-spacing: .03em; }
</style>
</head>
<body>
  <div class="wrap" id="dozzle-calculator" role="region" aria-label="Dozzle vs Hose-end comparison calculator">
    <div class="header">
      <span class="dot" aria-hidden="true"></span>
      <h1>Dozzle vs Hose-end: Impact Calculator</h1>
    </div>
    <p class="sub">Adjust how often you use each. We’ll compute annual water, cost, time, and bottles. Data is fixed from Dozzle’s internal sheet.</p>

    <div class="controls" aria-describedby="control-hint">
      <div class="control">
        <div class="row" style="justify-content:space-between;">
          <h3><span class="badge dozzle">Dozzle frequency</span></h3>
          <div class="value"><span id="v-dozzle">4x per Week</span></div>
        </div>
        <!-- Dozzle: 1–7x/week (no zero) -->
        <input id="slider-dozzle" type="range" min="1" max="7" step="1" value="4" aria-label="Dozzle uses per week" />
        <div class="hint">1–7× per week (Dozzle can be used daily)</div>
      </div>
      <div class="control">
        <div class="row" style="justify-content:space-between;">
          <h3><span class="badge hose">Hose-end frequency</span></h3>
          <div class="value"><span id="v-hose">1x per Week</span></div>
        </div>
        <!-- Hose-end is chosen as a period: every 1–4 weeks -->
        <input id="slider-hose-period" type="range" min="1" max="4" step="1" value="1" aria-label="Hose-end period in weeks" />
        <div class="hint">Every 1–4 weeks (1×/week, every 2 weeks, every 3 weeks, every 4 weeks)</div>
      </div>
    </div>

    <div class="grid">
      <div>
        <table aria-label="Annual totals comparison">
          <thead>
            <tr>
              <th>Metric</th>
              <th class="num">Dozzle</th>
              <th class="num">Hose-end</th>
              <th class="num">Savings</th>
              <th class="num">% Better</th>
            </tr>
          </thead>
          <tbody id="tbody-rows">
            <!-- rows injected by JS -->
          </tbody>
        </table>

        <div class="summary" id="summary-text" aria-live="polite"></div>

        <div class="btns">
          <button id="reset">Reset to defaults</button>
        </div>

        <p class="footnote">All calculations are deterministic and read-only; constants come from Dozzle’s “Dozzle vs Hose-end Sprayer Data.xlsx”.</p>
      </div>

      <div>
        <div class="viz">
          <h3>Water (gallons/year)</h3>
          <div class="barpair">
            <div class="labelrow"><span>Dozzle</span><strong id="viz-water-dozzle">0</strong></div>
            <div class="bars"><div class="bar"><span class="dozzle" id="bar-water-dozzle" style="width:0%"></span></div></div>
          </div>
          <div class="barpair">
            <div class="labelrow"><span>Hose-end</span><strong id="viz-water-hose">0</strong></div>
            <div class="bars"><div class="bar"><span class="hose" id="bar-water-hose" style="width:0%"></span></div></div>
          </div>
        </div>
        <div class="viz" style="margin-top:12px;">
          <h3>Cost ($/year)</h3>
          <div class="barpair">
            <div class="labelrow"><span>Dozzle</span><strong id="viz-cost-dozzle">0</strong></div>
            <div class="bars"><div class="bar"><span class="dozzle" id="bar-cost-dozzle" style="width:0%"></span></div></div>
          </div>
          <div class="barpair">
            <div class="labelrow"><span>Hose-end</span><strong id="viz-cost-hose">0</strong></div>
            <div class="bars"><div class="bar"><span class="hose" id="bar-cost-hose" style="width:0%"></span></div></div>
          </div>
        </div>
        <div class="viz" style="margin-top:12px;">
          <h3>Time (hours/year)</h3>
          <div class="barpair">
            <div class="labelrow"><span>Dozzle</span><strong id="viz-time-dozzle">0</strong></div>
            <div class="bars"><div class="bar"><span class="dozzle" id="bar-time-dozzle" style="width:0%"></span></div></div>
          </div>
          <div class="barpair">
            <div class="labelrow"><span>Hose-end</span><strong id="viz-time-hose">0</strong></div>
            <div class="bars"><div class="bar"><span class="hose" id="bar-time-hose" style="width:0%"></span></div></div>
          </div>
        </div>
        <div class="viz" style="margin-top:12px;">
          <h3>Plastic Bottles (per year)</h3>
          <div class="barpair">
            <div class="labelrow"><span>Dozzle</span><strong id="viz-bottles-dozzle">0</strong></div>
            <div class="bars"><div class="bar"><span class="dozzle" id="bar-bottles-dozzle" style="width:0%"></span></div></div>
          </div>
          <div class="barpair">
            <div class="labelrow"><span>Hose-end</span><strong id="viz-bottles-hose">0</strong></div>
            <div class="bars"><div class="bar"><span class="hose" id="bar-bottles-hose" style="width:0%"></span></div></div>
          </div>
        </div>
      </div>
    </div>

    <details style="margin-top:16px;">
      <summary>Assumptions (from internal sheet)</summary>
      <ul>
        <li>Dozzle per-use: <strong>1.2 oz</strong> product, <strong>8.8 oz</strong> water (~0.069 gal), <strong>0.5 min</strong>, cost <strong>$0.82</strong>, <strong>26.7</strong> uses/bottle.</li>
        <li>Hose-end per-use: <strong>8.25 gal</strong> water, <strong>10 min</strong>, cost <strong>$15.00</strong>/bottle (1 bottle per use).</li>
        <li>Weeks/year = 52. Dozzle ≤ 7×/week. Hose-end ranges <strong>1×/week to 1×/4 weeks</strong> (monthly).</li>
      </ul>
    </details>
  </div>

<script>
const CONSTS = {
  DOZZLE_WATER_PER_USE_GAL: 8.8 / 128.0,   // from sheet
  DOZZLE_COST_PER_USE: 0.82,               // $
  DOZZLE_TIME_PER_USE_HR: 0.5 / 60,        // 30 sec
  DOZZLE_BOTTLES_PER_USE: 1 / 26.7,        // uses per bottle

  HOSE_WATER_PER_USE_GAL: 8.25,            // gallons
  HOSE_COST_PER_USE: 15.0,                 // $ per bottle/use
  HOSE_TIME_PER_USE_HR: 10.0 / 60,         // 10 minutes
  HOSE_BOTTLES_PER_USE: 1.0,

  WEEKS_PER_YEAR: 52
};

const fmt = {
  money: (n) => '$' + Math.round(n).toLocaleString(),
  gal:   (n) => (Math.round(n * 10) / 10).toLocaleString() + ' gal',
  hours: (n) => (Math.round(n * 100) / 100).toLocaleString() + ' hr',
  bottles: (n) => (Math.round(n * 10) / 10).toLocaleString(),
  pct: (n) => (Math.round(n * 10) / 10).toLocaleString() + '%'
};

function computeAnnual(freqDozzlePerWeek, hosePeriodWeeks) {
  const usesY_d = freqDozzlePerWeek * CONSTS.WEEKS_PER_YEAR;
  const usesY_h = (1 / hosePeriodWeeks) * CONSTS.WEEKS_PER_YEAR; // every N weeks

  const d = {
    water: usesY_d * CONSTS.DOZZLE_WATER_PER_USE_GAL,
    cost:  usesY_d * CONSTS.DOZZLE_COST_PER_USE,
    time:  usesY_d * CONSTS.DOZZLE_TIME_PER_USE_HR,
    bottles: usesY_d * CONSTS.DOZZLE_BOTTLES_PER_USE
  };
  const h = {
    water: usesY_h * CONSTS.HOSE_WATER_PER_USE_GAL,
    cost:  usesY_h * CONSTS.HOSE_COST_PER_USE,
    time:  usesY_h * CONSTS.HOSE_TIME_PER_USE_HR,
    bottles: usesY_h * CONSTS.HOSE_BOTTLES_PER_USE
  };
  return { d, h };
}

function percentBetter(dozzle, hose) {
  if (hose <= 0) return 0;
  return (1 - (dozzle / hose)) * 100;
}

function update() {
  const freqD = parseInt(document.getElementById('slider-dozzle').value, 10);
  const hosePeriod = parseInt(document.getElementById('slider-hose-period').value, 10);

  // Value labels: "Nx per Week"
  document.getElementById('v-dozzle').textContent = `${freqD}x per Week`;
  const hoseLabel = hosePeriod === 1 ? '1x per Week' : `1x per ${hosePeriod} Weeks`;
  document.getElementById('v-hose').textContent = hoseLabel;

  const { d, h } = computeAnnual(freqD, hosePeriod);

  const rows = [
    ['Water (gallons)', d.water, h.water, h.water - d.water, percentBetter(d.water, h.water)],
    ['Cost ($)',        d.cost,  h.cost,  h.cost  - d.cost,  percentBetter(d.cost,  h.cost) ],
    ['Time (hours)',    d.time,  h.time,  h.time  - d.time,  percentBetter(d.time,  h.time) ],
    ['Bottles (count)', d.bottles, h.bottles, h.bottles - d.bottles, percentBetter(d.bottles, h.bottles)]
  ];

  const tbody = document.getElementById('tbody-rows');
  tbody.innerHTML = rows.map(r => {
    const [label, dv, hv, sv, pv] = r;
    const pos = sv >= 0;
    const sCls = pos ? 'savings' : 'loss';
    return `<tr>
      <td>${label}</td>
      <td class="num">${label.startsWith('Cost') ? fmt.money(dv) : label.startsWith('Water') ? fmt.gal(dv) : label.startsWith('Time') ? fmt.hours(dv) : fmt.bottles(dv)}</td>
      <td class="num">${label.startsWith('Cost') ? fmt.money(hv) : label.startsWith('Water') ? fmt.gal(hv) : label.startsWith('Time') ? fmt.hours(hv) : fmt.bottles(hv)}</td>
      <td class="num ${sCls}">${label.startsWith('Cost') ? fmt.money(Math.abs(sv)) : label.startsWith('Water') ? fmt.gal(Math.abs(sv)) : label.startsWith('Time') ? fmt.hours(Math.abs(sv)) : fmt.bottles(Math.abs(sv))}</td>
      <td class="num ${sCls}">${fmt.pct(Math.max(0, pv))}</td>
    </tr>`;
  }).join('');

  // Bars (relative widths)
  function setBar(pairIdBase, dv, hv, formatter) {
    const max = Math.max(dv, hv, 1e-9);
    const wd = Math.min(100, (dv / max) * 100);
    const wh = Math.min(100, (hv / max) * 100);
    document.getElementById(`bar-${pairIdBase}-dozzle`).style.width = wd + '%';
    document.getElementById(`bar-${pairIdBase}-hose`).style.width = wh + '%';
    document.getElementById(`viz-${pairIdBase}-dozzle`).textContent = formatter(dv);
    document.getElementById(`viz-${pairIdBase}-hose`).textContent = formatter(hv);
  }
  setBar('water', d.water, h.water, (x)=>fmt.gal(x));
  setBar('cost',  d.cost,  h.cost,  (x)=>fmt.money(x));
  setBar('time',  d.time,  h.time,  (x)=>fmt.hours(x));
  setBar('bottles', d.bottles, h.bottles, (x)=>fmt.bottles(x));

  // Short summary only + mission nod
  const savedWater = h.water - d.water;
  const savedCost  = h.cost  - d.cost;
  const savedBott  = h.bottles - d.bottles;
  const savedTime  = h.time  - d.time;

  const summary = `At these settings, Dozzle saves ${fmt.gal(savedWater)}, ${fmt.money(savedCost)}, ${fmt.bottles(savedBott)} bottles, and ${fmt.hours(savedTime)} per year.\n` +
                  `Every backyard adds up—on the path to One Billion Gallons.`;
  document.getElementById('summary-text').textContent = summary;
}

document.getElementById('slider-dozzle').addEventListener('input', update);
document.getElementById('slider-hose-period').addEventListener('input', update);
document.getElementById('reset').addEventListener('click', () => {
  document.getElementById('slider-dozzle').value = 4;
  document.getElementById('slider-hose-period').value = 1;
  update();
});
update();
</script>
</body>
</html>
